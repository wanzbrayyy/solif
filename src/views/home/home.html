<template>
  <require from="../../components/movie-card"></require>

  <div class="container">
    
    <!-- TAMPILAN SAAT LOADING -->
    <div if.bind="isLoading" class="loading-container">
      <i class="fas fa-circle-notch fa-spin fa-3x"></i>
      <h3 style="margin-top: 20px;">Memuat Wanzofc...</h3>
    </div>

    <!-- TAMPILAN SAAT SELESAI LOADING -->
    <div if.bind="!isLoading">
      
      <!-- DYNAMIC SECTION RENDERER -->
      <!-- Loop ini akan membuat section untuk "Trending", "Netflix", "Disney", dll. secara otomatis -->
      <section repeat.for="section of homeSections" class="movie-section">
        
        <!-- Tampilkan Judul Kategori -->
        <h2 class="section-title">
          <i class="fas fa-fire" if.bind="$first"></i> <!-- Ikon api hanya untuk section pertama -->
          <i class="fas fa-film" if.bind="!$first"></i>
          ${section.title}
        </h2>
        
        <!-- Tampilkan Grid Film -->
        <div class="grid">
          <movie-card repeat.for="movie of section.items" movie.bind="movie"></movie-card>
        </div>
        
      </section>


      <!-- ERROR MESSAGE JIKA SEMUA DATA KOSONG -->
      <div if.bind="homeSections.length === 0" class="empty-state">
        <i class="fas fa-exclamation-triangle fa-3x" style="color: #ff5555;"></i>
        <h2 style="margin-top: 15px;">Gagal Memuat Data Film</h2>
        <p style="color: #888;">Server mungkin sedang sibuk atau tidak ada data yang tersedia saat ini.</p>
      </div>

    </div>
  </div>
</template>